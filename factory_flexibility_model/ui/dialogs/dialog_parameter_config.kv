# This file defines the dialog window that pops up when the user clicks on a configurable parameter in the component configuration window

#:import add_static_parameter_value factory_flexibility_model.ui.dialogs.dialog_parameter_config.add_static_parameter_value
#:import add_timeseries_parameter_value factory_flexibility_model.ui.dialogs.dialog_parameter_config.add_timeseries_parameter_value
#:import update_timeseries_list factory_flexibility_model.ui.dialogs.dialog_parameter_config.update_timeseries_list
#:import validate_value factory_flexibility_model.ui.dialogs.dialog_parameter_config.validate_value
#:import show_popup_add_static_value factory_flexibility_model.ui.dialogs.dialog_parameter_config.show_popup_add_static_value
#:import show_popup_add_timeseries factory_flexibility_model.ui.dialogs.dialog_parameter_config.show_popup_add_timeseries

<DialogParameterConfig>
    size_hint: None, None
    width:dp(620)
    height:dp(800)
    orientation: "vertical"
    BoxLayout:
        orientation: "horizontal"
        spacing: 20
        BoxLayout:
            spacing: 20
            orientation: "vertical"
            size_hint_x: None
            width: dp(150)
            MDRaisedButton:
                id: button_add_value
                text: "Add Static Value"
                on_release: show_popup_add_static_value(app)
            MDRaisedButton:
                id: button_add_timeseries
                text: "Add Timeseries"
                on_release: show_popup_add_timeseries(app)
            Widget:

        MDCard:
            elevation: 2
            padding: 20
            orientation: "vertical"
            size_hint_x: None
            width: dp(400)
            MDLabel:
                text: "Parameter variations"
                font_style: 'H5'
                size_hint_y: None
                height: dp(45)
            ScrollView:
                MDList:
                    id: list_parameter_variations


    BoxLayout:
        orientation: "horizontal"
        size_hint_y: None
        height: dp(30)
        Widget:
        MDRaisedButton:
            text: "OK"
            on_release: app.close_dialog()
            on_release: app.update_config_tab()

<PopupAddStaticValue>
    spacing: "12dp"
    padding: (0, 30)
    size_hint_y: None
    height: "200dp"
    #width: "400dp"
    BoxLayout:
        orientation: "vertical"
        MDTextField:
            id: textfield_value
            hint_text: "Enter Value"
            required: True
            max_text_length: 20
            on_text: validate_value(app, self)
        BoxLayout:
            padding: 20
            #size_hint_y: None
            #height: dp(30)
            orientation: "horizontal"
            Widget:
            MDFlatButton:
                text: "Cancel"
                on_release: app.close_popup()
            MDRaisedButton:
                text: "Add Value"
                on_release: add_static_parameter_value(app)
                id: button_add_static_value
                disabled: True

<PopupAddTimeseries>
    spacing: "12dp"
    padding: (0, 30)
    size_hint: (None, None)
    height: "800dp"
    width: "1000dp"
    BoxLayout:
        padding: 20
        orientation: "vertical"
        BoxLayout:
            padding: 20
            spacing: 20
            orientation: "horizontal"
            BoxLayout:
                spacing: 10
                size_hint_x: .5
                orientation: "vertical"
                MDTextField:
                    id: textfield_search
                    hint_text: "Search timeseries"
                    icon_left: "magnify"
                    on_text: update_timeseries_list(app)
                ScrollView:
                    MDList:
                        id: list_timeseries
            BoxLayout:
                orientation: "vertical"
                MDCard:
                    elevation: 3
                    padding: 10
                    #size_hint_y: .5
                    orientation: "vertical"
                    Graph:
                        id: timeseries_preview
                        padding: 20
                        x_grid: True
                        y_grid: True
                        y_grid_label: True
                        x_grid_label: True
                        label_options: {"color": (0,0,0,1)}
                        tick_color: (0, 0, 0, .1)

                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: dp(250)
                    BoxLayout:
                        orientation: "vertical"
                        BoxLayout:
                            orientation: "horizontal"
                            spacing: 10
                            size_hint_y: None
                            height: dp(50)
                            MDIcon:
                                icon: "key-variant"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                size_hint_x: .2
                            MDLabel:
                                id: label_selected_timeseries

                        BoxLayout:
                            orientation: "horizontal"
                            spacing: 10
                            size_hint_y: None
                            height: dp(50)
                            MDIcon:
                                icon: "arrow-collapse-up"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                size_hint_x: .2
                            MDLabel:
                                id: label_value_max
                        BoxLayout:
                            orientation: "horizontal"
                            size_hint_y: None
                            height: dp(50)
                            spacing: 10
                            MDIcon:
                                icon: "arrow-collapse-down"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                size_hint_x: .2
                            MDLabel:
                                id: label_value_min
                        BoxLayout:
                            orientation: "horizontal"
                            size_hint_y: None
                            height: dp(50)
                            spacing: 10
                            MDIcon:
                                icon: "format-align-middle"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                size_hint_x: .2
                            MDLabel:
                                id: label_value_avg
                        BoxLayout:
                            orientation: "horizontal"
                            size_hint_y: None
                            height: dp(50)
                            spacing: 10
                            MDIcon:
                                icon: "arrow-expand-horizontal"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                size_hint_x: .2
                            MDLabel:
                                id: label_timesteps
        BoxLayout:
            padding: 20
            orientation: "horizontal"
            size_hint_y: None
            height: dp(30)
            Widget:
            MDFlatButton:
                text: "Cancel"
                on_release: app.close_popup()
            MDRaisedButton:
                text: "Add Timeseries"
                on_release: add_timeseries_parameter_value(app)
                id: button_add_timeseries
                disabled: True
